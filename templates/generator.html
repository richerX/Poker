<!DOCTYPE html>

{% load static %}
<link rel="stylesheet" href="{% static 'style.css' %}">
<link rel="stylesheet" href="{% static 'generator.css' %}">

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Poker</title>
    </head>

    <body>
        {% include "sections/menu.html" with mode="Generator"%}

        <div id="rectangle-main" style="font-size: 30px">
            {% for stage in stages %}
                <div id="stage-{{ stage.stage }}" class="stage" {% if stage.stage > 0 %}style="display: none; height: 0"{% endif %}>
                    <div style="height: 7%;"></div>
                    <div id="players">
                        {% include "sections/actor.html" with actor="player" players_context=stage.players_context %}
                    </div>

                    {% include "sections/actor.html" with actor="dealer" players_context=stage.dealer_context %}

                    <div id="next-prev-div">
                        <button id="menu-button" type="submit" onclick="change_stage(-1)" style="width: 10%; height: 70%;">
                            <strong>Previous</strong>
                        </button>

                        <button id="menu-button" type="submit" onclick="change_stage(1)" style="width: 10%; height: 70%;">
                            <strong>Next</strong>
                        </button>
                    </div>
                </div>
            {% endfor %}
        </div>

        <script>
            let stage = 0;
            let max_stage = {{ stages|length }} - 1

            function change_stage(delta){
                stage += delta
                stage = Math.max(Math.min(stage, max_stage), 0)
                for (let index = 0; index <= max_stage; index++) {
                    document.getElementById("stage-" + index).style.display = "none";
                    document.getElementById("stage-" + index).style.height = "0";
                }
                document.getElementById("stage-" + stage).style.display = "block";
                document.getElementById("stage-" + stage).style.height = "100%";
            }
        </script>

        {% include "sections/scripts.html" %}
    </body>
</html>
